[gd_scene load_steps=2 format=3 uid="uid://bu76trp747cmi"]

[sub_resource type="GDScript" id="GDScript_1s2f2"]
script/source = "extends ScrollContainer

var max_visible_items: int = 5
var item_height: float = 0.0

var items := []

@export var items_start: int = 0
@export var items_end: int = 23

@onready var container: VBoxContainer = $Container
@onready var item_placeholder: Label = $Container/__PLACEHOLDER__

func _ready() -> void:
	assert(max_visible_items >= 3)

	if max_visible_items % 2 == 0:
		push_warning(\"It's recommended to choose an `Odd` number for symmetry!\")

	item_height = item_placeholder.size.y

	# We add half of the amount of `max_visible_items` as dummies so,
	# the first and last items are centered
	var dummies: int = (max_visible_items - 1) / 2 \\
		if max_visible_items % 2 == 1 else max_visible_items / 2

	for i in range(dummies):
		_add_dummy_item().custom_minimum_size.y = item_height

	for i in range(items_start, items_end + 1):
		var item := Label.new()
		item.text = str(i)
		item.add_theme_font_size_override(\"font_size\",
			item_placeholder.get_theme_font_size(\"font_size\"))
		
		items.push_back(item)
		
		container.add_child(item)
		

	for i in range(dummies):
		_add_dummy_item().custom_minimum_size.y = item_height

	size.y = item_height * max_visible_items


func _process(delta: float) -> void:
	_snap_to_nearest(delta)


func _add_dummy_item() -> Control:
	var dummy := Control.new()

	container.add_child(dummy)

	return dummy

func _snap_to_nearest(delta: float):
	var target_position: int = roundi(scroll_vertical / item_height)
		
	scroll_vertical = lerp(scroll_vertical,
		target_position * int(item_height), delta * 10.0)
"

[node name="TimePicker" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Panel" type="Panel" parent="."]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_top = 135.0
offset_bottom = 344.0
grow_horizontal = 2

[node name="Hour" type="ScrollContainer" parent="."]
layout_mode = 0
offset_right = 40.0
offset_bottom = 49.72
horizontal_scroll_mode = 0
script = SubResource("GDScript_1s2f2")

[node name="Container" type="VBoxContainer" parent="Hour"]
layout_mode = 2
theme_override_constants/separation = 0

[node name="__PLACEHOLDER__" type="Label" parent="Hour/Container"]
visible = false
layout_mode = 2
theme_override_font_sizes/font_size = 48
text = "0"
